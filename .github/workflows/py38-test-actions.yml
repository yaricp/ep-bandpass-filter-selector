name: Run check format lint and unittests
on:
  push:
    branches:
      - py3.8

jobs:
  rebuild-images-prod:
    runs-on: python:3.8
    permissions:
      contents: read
      packages: write
    steps:
      - uses: actions/checkout@v2
      - name: install dependencies
        run: |
          ls -a;
          bash -c ./scripts/./install.sh;
      - name: run test format code
        run: |
          .venv/bin/poetry run ruff check .
          # .venv/bin/poetry run ruff format .
      - name: run unittests
        run: |
          .venv/bin/poetry run pytest